#!/usr/bin/env python3
# -*- coding: utf-8 -*-

f = open('data.txt', 'r')
noise_data = f.readlines()

noise_data = [float(x)+0.5 for x in noise_data]
f.close()

for shift in range(100, 1000, 10):
    recurring_msg_bits =''
    
    for combination in range(0, shift):
        partial_noise_data = [noise_data[x] for x in range(combination,len(noise_data), shift)]
        recurring_msg_bits += str(int(round(sum(partial_noise_data)/len(partial_noise_data))))
    
    if 20 * '1' and 30 * '0' in recurring_msg_bits:
        print(shift, recurring_msg_bits)
        print(' ')
        
cleaned_message = '111111111100000000001111111111111111111100000000000000000000000000000000000000001111111111111111111100000000001111111111000000000000000000000000000000000000000011111111111111111111000000000011111111111111111111000000000011111111111111111111000000000000000000000000000000000000000011111111110000000000111111111100000000000000000000000000000000000000001111111111000000000011111111110000000000111111111100000000000000000000000000000000000000001111111111111111111100000000001111111111000000000011111111111111111111000000000011111111111111111111000000000000000000000000000000000000000011111111111111111111000000000011111111110000000000000000000000000000000000000000111111111111111111110000000000111111111111111111110000000000111111111111111111110000000000000000000000000000000000000000111111111100000000001111111111000000000000000000000000000000000000000011111111110000000000111111111100000000001111111111000000000000000000000000000000000000000011111111110000000000'

short = (10 * '1') + (10 * '0')
long = (20 * '1') + (10 * '0')
space = (30 * '0')

message = cleaned_message.replace(long, '-')
message = message.replace(short, '.')
message = message.replace(space, ' ')

print(message)
